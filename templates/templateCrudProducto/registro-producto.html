{% extends 'base-form.html' %}

{% block title %}Registro de Producto{% endblock %}



{% block header_title %}
<h1 class="header-title">REGISTRO DE PRODUCTO</h1>
{% if request.COOKIES.username|default:"" == "Admin" %}
    <a href="{% url 'admin-crud-producto' %}">
        <button class="button-header" type="button">Volver al Panel Admin</button>
    </a>
{% else %}
    <a href="{% url 'crud-producto' %}">
        <button class="button-header" type="button">Volver al Inicio</button>
    </a>
{% endif %}
{% endblock %}

{% block extra_messages %}
{% if errores %}
    <section class="messages">
        <div class="message">
            <h1>Corrige los errores en el formulario antes de continuar</h1>
        </div>
    </section>
{% endif %}
{% endblock %}

{% block content %}
<form method="POST" novalidate>
    {% csrf_token %}

    <!-- CÓDIGO DE BARRAS -->
    <div class="form-group">
        <label for="CodigoDeBarras">Código de Barras:</label>
        <div class="form-help">Ingrese el código de barras del producto</div>
        {% if errores.CodigoDeBarras %}
            <div class="field-error">• {{ errores.CodigoDeBarras.0 }}</div>
        {% endif %}
        <input type="text" name="CodigoDeBarras" id="CodigoDeBarras" placeholder="Ej: 1234567890123"
               class="input-text" value="{{ data.CodigoDeBarras|default:'' }}">
    </div>

    <!-- NOMBRE -->
    <div class="form-group">
        <label for="NombreProducto">Nombre del Producto:</label>
        <div class="form-help">Ingrese el nombre del producto</div>
        {% if errores.NombreProducto %}
            <div class="field-error">• {{ errores.NombreProducto.0 }}</div>
        {% endif %}
        <input type="text" name="NombreProducto" id="NombreProducto" placeholder="Ej: Leche"
               class="input-text" value="{{ data.NombreProducto|default:'' }}">
    </div>

    <!-- VALOR -->
    <div class="form-group">
        <label for="ValorProducto">Valor:</label>
        <div class="form-help">Ingrese el valor del producto</div>
        {% if errores.ValorProducto %}
            <div class="field-error">• {{ errores.ValorProducto.0 }}</div>
        {% endif %}
        <input type="number" name="ValorProducto" id="ValorProducto" placeholder="Ej: 1200"
               class="input-text" value="{{ data.ValorProducto|default:'' }}">
    </div>

    <!-- STOCK -->
    <div class="form-group">
        <label for="StockProducto">Stock:</label>
        <div class="form-help">Ingrese la cantidad en stock</div>
        {% if errores.StockProducto %}
            <div class="field-error">• {{ errores.StockProducto.0 }}</div>
        {% endif %}
        <input type="number" name="StockProducto" id="StockProducto" placeholder="Ej: 10"
               class="input-text" value="{{ data.StockProducto|default:'' }}">
    </div>

    <!-- MARCA -->
    <div class="form-group">
        <label for="MarcaProducto">Marca:</label>
        <div class="form-help">Ingrese la marca del producto</div>
        {% if errores.MarcaProducto %}
            <div class="field-error">• {{ errores.MarcaProducto.0 }}</div>
        {% endif %}
        <input type="text" name="MarcaProducto" id="MarcaProducto" placeholder="Ej: Nestlé"
               class="input-text" value="{{ data.MarcaProducto|default:'' }}">
    </div>

    <!-- FECHA DE VENCIMIENTO -->
    <div class="form-group">
        <label for="FechaDeVencimiento">Fecha de Vencimiento:</label>
        <div class="form-help">Selecciona la fecha de vencimiento</div>
        {% if errores.FechaDeVencimiento %}
            <div class="field-error">• {{ errores.FechaDeVencimiento.0 }}</div>
        {% endif %}
        <input type="date" name="FechaDeVencimiento" id="FechaDeVencimiento"
               class="input-text" value="{{ data.FechaDeVencimiento|default:'' }}">
    </div>

    <!-- CATEGORÍA -->
    <div class="form-group">
        <label for="CategoriaProducto">Categoría:</label>
        <div class="form-help">Seleccione la categoría del producto</div>
        {% if errores.CategoriaProducto %}
            <div class="field-error">• {{ errores.CategoriaProducto.0 }}</div>
        {% endif %}
        <select name="CategoriaProducto" id="CategoriaProducto" class="input-text">
            <option value="">-- Seleccione --</option>
            {% for cat in Categorias %}
                <option value="{{ cat.IdCategoriaProducto }}"
                    {% if data.CategoriaProducto is not None and data.CategoriaProducto == cat.IdCategoriaProducto %}selected{% endif %}>
                    {{ cat.NombreCategoria }}
                </option>
            {% endfor %}
        </select>
    </div>

    <!-- BODEGA -->
    <div class="form-group">
        <label for="Bodegas">Bodega:</label>
        <div class="form-help">Seleccione la bodega</div>
        {% if errores.Bodegas %}
            <div class="field-error">• {{ errores.Bodegas.0 }}</div>
        {% endif %}
        <select name="Bodegas" id="Bodegas" class="input-text">
            <option value="-- Seleccione --">-- Seleccione --</option>
            {% for bod in Bodegas %}
                <option value="{{ bod.IdBodega }}"
                    {% if data.Bodegas is not None and data.Bodegas == bod.IdBodega %}selected{% endif %}>
                    {{ bod.NombreBodega }}
                </option>
            {% endfor %}
        </select>
    </div>

    <input class="form-enviar" type="submit" value="ENVIAR"
           onclick="return confirm('¿Seguro que deseas enviar estos datos?')">
</form>
{% endblock %}